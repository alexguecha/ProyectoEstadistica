knitr::kable(
(MItabla)
)
summary(BdCrowfunding$CantidadInversiones)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16.8)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones,breaks="Sturges",right=F)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones,breaks="Sturges")
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16.8)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, k=9)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, k=9)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, k=5)
knitr::kable(
(CItabla)
)
MItabla <- fdt(BdCrowfunding$Edad, start=2, end=90, h=17.6)
knitr::kable(
(MItabla)
)
Edtabla <- fdt(BdCrowfunding$Edad,k=5)
knitr::kable(
(Edtabla)
)
IMtabla <- fdt(BdCrowfunding$IngresosMes,k=5)
knitr::kable(
(IMtabla)
)
MItabla <- fdt(BdCrowfunding$MontoInversion, start=49500, end=156752000, h=31340500)
knitr::kable(
(MItabla)
)
MItabla <- fdt(BdCrowfunding$MontoInversion, start=50000, end=156752000, h=31030000)
knitr::kable(
(MItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16.8)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=17)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16.9)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=16.7)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, start=1, end=85, h=14)
knitr::kable(
(CItabla)
)
CItabla <- fdt(BdCrowfunding$CantidadInversiones, k=5)
knitr::kable(
(CItabla)
)
IMtabla <- fdt(BdCrowfunding$IngresosMes,K=5)
knitr::kable(
(IMtabla)
)
IMtabla <- fdt(BdCrowfunding$IngresosMes,K=5)
knitr::kable(
(IMtabla)
)
IMtabla <- fdt(BdCrowfunding$IngresosMes,k=5)
knitr::kable(
(IMtabla)
)
IMtabla <- fdt(BdCrowfunding$IngresosMes,k=5)
knitr::kable(
(IMtabla)
)
plot(IMtabla,type='fh',main="Histograma de frecuencias absolutas",
xlab="Ingresos Mes",ylab="Conteos",col="red")
plot(IMtabla,type='fp',main="Poligono de frecuencias absolutas",
xlab="Ingresos Mes",ylab="Conteos",col="black",lwd=2)
plot(IMtabla,type='rfpp',main="Poligono de frecuencias relativas (%)",
xlab="Ingresos",ylab="Porcentaje",col="black",lwd=2)
plot(IMtabla,type='rfpp',main="Poligono de frecuencias relativas (%)",
xlab="Ingresos",ylab="Porcentaje",col="black",lwd=2)
plot(IMtabla,type='cfp',main="Poligono de frecuencias absolutas acumuladas",
xlab="Ingresos",ylab="Conteos",col="black",lwd=2)
plot(IMtabla,type='cfp',main="Poligono de frecuencias absolutas acumuladas",
xlab="Ingresos",ylab="Conteos",col="black")
library(agricolae)
par(mfrow=c(1,2),mar=c(4,4,0,1),cex=0.6)
h1<-graph.freq(BdCrowfunding$IngresosMes, density=6, col="blue",border="red",ylim=c(0,0.6), frequency=2,xlab="population")
h2<-graph.freq(BdCrowfunding$IngresosMes, border=0,ylim=c(0,0.6), frequency=2,xlab="population")
polygon.freq(h2,col="blue", frequency=2)
library(agricolae)
library(agricolae)
install.packages("agricolae")
library(agricolae)
par(mfrow=c(1,2),mar=c(4,4,0,1),cex=0.6)
h1<-graph.freq(BdCrowfunding$IngresosMes, density=6, col="blue",border="red",ylim=c(0,0.6), frequency=2,xlab="population")
h2<-graph.freq(BdCrowfunding$IngresosMes, border=0,ylim=c(0,0.6), frequency=2,xlab="population")
polygon.freq(h2,col="blue", frequency=2)
par(mfrow=c(1,2),mar=c(4,4,0,1),cex=1)
h1<-graph.freq(BdCrowfunding$IngresosMes, density=6, col="blue",border="red",ylim=c(0,1), frequency=2,xlab="population")
h2<-graph.freq(BdCrowfunding$IngresosMes, border=0,ylim=c(0,1), frequency=2,xlab="population")
polygon.freq(h2,col="blue", frequency=2)
library(readxl)
X2015_2019_siniestralidad_vial_CAS_EJEMPLO_MUESTREO_R <- read_excel("MAS/2015_2019_siniestralidad_vial_CAS_EJEMPLO_MUESTREO_R.xlsx")
View(X2015_2019_siniestralidad_vial_CAS_EJEMPLO_MUESTREO_R)
MARCO=X2015_2019_siniestralidad_vial_CAS_EJEMPLO_MUESTREO_R
# Visualizar el dataset donde encontraremo las variables de interés
head(MARCO)
# Muestra la dimensión del dataset
dim(MARCO)
# Explorando las variables del Marco de Muestreo
colnames(MARCO)
# CARGANDO EL SHAPEFILE
# Librería para leer Shapefile desde R:
library(rgdal)
# CARGANDO EL SHAPEFILE
# Librería para leer Shapefile desde R:
library(rgdal)
# Indicandole a R donde encontrar nuestra carpeta de Shapefile, y el
# nombre del archivo Shapefile.
sp_df <- readOGR(dsn = "~/GitHub/ProyectoEstadistica/ProyectoEstadistica/MAS/Shapefile_Localidades_SHP_Bogota", layer = "Loca")
head(sp_df)
fix(sp_df)
#===================================================================
# Convertir Shapefile en Excel:
# Para poder supervisar en detalle la base con la que se está graficando,
#es necesario tener la posiblidad de maniobrar la data del shapefile.
# Esta línea convierte el Shapefile en Dataframe
library("raster")
LocalidadEXCEL=as(sp_df, "data.frame")
head(LocalidadEXCEL)
fix(LocalidadEXCEL)
# Y estas líneas exporta a EXCEL la base anterior
library(readxl)
library(writexl)
write_xlsx(LocalidadEXCEL,"~/GitHub/ProyectoEstadistica/ProyectoEstadistica/MAS/LocalidadEXCEL.xlsx")
library(leaflet)
library(dplyr)
library(sf)
library(tmap)
library(tigris)
library(readxl)
BD_inversionistas_depurada_V6_anonimizada <- read_excel("Sergio/BD_inversionistas_depurada_V6_anonimizada.xlsx")
View(BD_inversionistas_depurada_V6_anonimizada)
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
install.packages("corrgram")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
install.packages("gclus")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
library(descr)
install.packages("descr")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
library(descr)
library(GGally)
install.packages("GGally")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
library(descr)
library(GGally)
library(agricolae)
library(plotly)
install.packages("plotly")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
library(descr)
library(GGally)
library(agricolae)
library(plotly)
library(fdth)
library(caTools)
library(ROCR)
install.packages("ROCR")
install.packages("pROC")
knitr::opts_chunk$set(echo = F)
knitr::opts_chunk$set(echo = F)
library(readxl)
library(ggplot2)
library(dplyr)
library(fBasics)
library(MASS)
library(corrgram)
library(gclus)
library(descr)
library(GGally)
library(agricolae)
library(plotly)
library(fdth)
library(caTools)
library(ROCR)
library(pROC)
cor(x = BDa2censo$Edad, y = BDa2censo$MontoInversion, method = "pearson")
library(readxl)
BDa2censo <- read_excel("BD_inversionistas_depurada_V6_anonimizada.xlsx")
cor(x = BDa2censo$Edad, y = BDa2censo$MontoInversion, method = "pearson")
cor(x = BDa2censo$IngresosMes, y = BDa2censo$MontoInversion, method = "pearson")
cor(x = BDa2censo$Patrimonio, y = BDa2censo$MontoInversion, method = "pearson")
cor(x = BDa2censo$CantidadInversiones, y = BDa2censo$MontoInversion, method = "pearson")
#cor(x = BDa2censo$CodProposito, y = BDa2censo$MontoInversion, method = "pearson")
#cor(x = BDa2censo$CodProposito, y = BDa2censo$CantidadInversiones, method = "pearson")
#cor(x = BDa2censo$PotencialP2, y = BDa2censo$Edad, method = "pearson")
cor(x = BDa2censo$Edad, y = BDa2censo$CantidadInversiones, method = "pearson")
cor(x = BDa2censo$IngresosMes, y = BDa2censo$CantidadInversiones, method = "pearson")
cor(x = BDa2censo$Patrimonio, y = BDa2censo$CantidadInversiones, method = "pearson")
cor(x = BDa2censo$MontoInversion, y = BDa2censo$CantidadInversiones, method = "pearson")
library(readxl)
Incendios <- read_excel("TallerMuestreo/Incendios.xlsx")
View(Incendios)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
Incendios <- read_excel("TallerMuestreo/Incendios.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
Incendios <- read_excel("Incendios.xlsx")
head(Incendios)
## En el proceso de limpieza se quitaros 2 registros , un dato que corresponde a peru y un dato vacio
dim(Incendios)
N = nrow(Incendios)
## N corresponde a la población total del estudio que son el total de registros
z = qnorm(0.035, mean= 0, sd = 1, lower.tail = TRUE)
##
d = 0.03
n = z*z*0.5*0.5/(d*d+(z*z*0.5*0.5)/N)
n = ceiling(n)
n
set.seed(3564)
muestra_inc <- Incendios [ sample (N, size = n ),]
muestra_inc
MediaH=mean(muestra_inc$HERIDOS)
MediaH
MediaF=mean(muestra_inc$FALLECIDOS)
MediaF
muestra_inc$TotalN <- N
head(muestra_inc)
muestra_inc
library(survey)
mydesign <- svydesign(id = ~1, data = muestra_inc, fpc = ~TotalN)
summary(mydesign)
# Estimaciones
svymean(muestra_inc$HERIDOS,mydesign)
summary(mydesign)
#=========================
VarH=var(muestra_inc$HERIDOS)
VarH
MediaH=mean(muestra_inc$HERIDOS)
MediaH
VarEstim=(1-757/4435)*VarH/757
VarEstim
EE=sqrt(VarEstim)
EE
CV=(EE/MediaH)*100
CV
valort=qt(c(0.025),df=(757-1),lower.tail = FALSE)# probabilidad de cola 0.025 equivle a nivel de confianza del 95%, ya q la dist t es simetrica
Lsup=MediaH+(valort*EE)
Linf=MediaH-(valort*EE)
resumenMediaH1 <- data.frame(n ,MediaH,VarEstim,EE,Linf,Lsup,CV)
resumenMediaH1
#Con un nivel de confianza del 95% el promedio de los heridos de la población va a ser de 0.39
EstimTot=N*MediaF
EstimTot
VarEstimTOT=(N^2)*VarEstim
VarEstimTOT
#El Error Estándar (EE) de la estimación, es:
EETot=sqrt(VarEstimTOT)
EETot
## Calculo de intervalo de confianza al 95%
valortF=qt(c(0.025),df=(757-1),lower.tail = FALSE)# probabilidad de cola 0.025 equivle a nivel de confianza del 95%, ya q la dist t es simetrica
LsupTotF=EstimTot+(valortF*EETot)
LinfTotF=EstimTot-(valortF*EETot)
# El coeficiente de variación de la estimación del Total, es:
CVTot=(EETot/EstimTot)*100
CVTot
resumenTotF <- data.frame(n ,EstimTot,VarEstimTOT,EETot,LinfTotF,LsupTotF,CVTot)
resumenTotF
## Cartografía
library(rgdal)
sp_df <- readOGR(dsn = "C:/Users/Sergio/Downloads/MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
## Cartografía
library(rgdal)
sp_df <- readOGR(dsn = "/MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
## Cartografía
library(rgdal)
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
head(sp_df)
#fix(sp_df)
as.data.frame(sp_df)
DPTO_SH="/MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
## Cartografía
library(rgdal)
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
## Cartografía
library(rgdal)
library(sf)
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
Incendios <- read_excel("Incendios.xlsx")
## Cartografía
library(rgdal)
library(sf)
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
## Cartografía
library(rgdal)
library(sf)
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN2021_DPTO_POLITICO/MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
library(raster)
library(readxl)
library(writexl)
write_xlsx(LocalidadEXCEL,"LocalidadEXCEL.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(raster)
library(readxl)
library(writexl)
library(leaflet)
library(dplyr)
library(sf)
library(tmap)
library(tigris)
library(dplyr)
library(tidyr)
library(rgdal)
library(sf)
library(survey)
Incendios <- read_excel("Incendios.xlsx")
## Cartografía
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN2021_DPTO_POLITICO/MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
HeridosDepto <- muestra_inc %>%
group_by(DEPARTAMENTO) %>%
summarise(promedioH = mean(HERIDOS),COD_DANE)
# Para visualizar la base resumida
ResumenH=as.data.frame(HeridosDepto)
ResumenH
Etiquetas=unite(ResumenH, Etiqueta,c(1,2), sep = ": ", remove = TRUE)
Etiquetas=Etiquetas[,1]
Etiquetas
Resumen3=cbind(ResumenH, Etiquetas )
Resumen3
DPTO_SH2
DPTO_JOIN <- geo_join(DPTO_SH2, Resumen3,"DPTO_CCDGO", "COD_DANE")
#DPTO_JOIN = as.data.frame(DPTO_JOIN)
DPTO_JOIN
pal <- colorNumeric( palette = "RdYlBu", domain=DPTO_JOIN$promedioH)  #palette = "YlGnBu"   "RdBu"  "RdYlBu"  "Spectral"  "Paired"  "PuRd"  "RdYlGn"
leaflet(sp_df) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(color = ~pal(DPTO_JOIN$promedioH),
stroke = FALSE, fillOpacity = 1.0)  # Este parámetro proporciona opacidad en el mapa (Valores esntre 0 y 1)
popup_sb <- paste0("Promedio de Heridos: ", as.character(DPTO_JOIN$promedioH))
leaflet(sp_df) %>%
addProviderTiles("CartoDB.Positron") %>%
#setView(-98.483330, 38.712046, zoom = 4) %>%
addPolygons(data = DPTO_JOIN ,
fillColor = ~pal(DPTO_JOIN$promedioH),
opacity = 1,
color = "black",
dashArray = "3",fillOpacity = 0.9,
highlight = highlightOptions(
weight = 1,
color = "#666",
dashArray = "",
fillOpacity = 1,
bringToFront = TRUE),
label = DPTO_JOIN$Etiquetas,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"))%>%
addLegend(pal = pal, values =DPTO_JOIN$promedioH, opacity = 0.7, title = NULL,
position = "bottomright")
## Cartografía
sp_df <- readOGR(dsn = "MGN2021_DPTO_POLITICO", layer = "MGN_DPTO_POLITICO")
#head(sp_df)
#fix(sp_df)
#as.data.frame(sp_df)
DPTO_SH="MGN2021_DPTO_POLITICO/MGN_DPTO_POLITICO.shp"
DPTO_SH2 <- st_read(DPTO_SH)
HeridosDepto <- muestra_inc %>%
group_by(DEPARTAMENTO) %>%
summarise(promedioH = mean(HERIDOS),COD_DANE)
# Para visualizar la base resumida
ResumenH=as.data.frame(HeridosDepto)
ResumenH
Etiquetas=unite(ResumenH, Etiqueta,c(1,2), sep = ": ", remove = TRUE)
Etiquetas=Etiquetas[,1]
Etiquetas
Resumen3=cbind(ResumenH, Etiquetas )
Resumen3
DPTO_SH2
DPTO_JOIN <- geo_join(DPTO_SH2, Resumen3,"DPTO_CCDGO", "COD_DANE")
#DPTO_JOIN = as.data.frame(DPTO_JOIN)
DPTO_JOIN
pal <- colorNumeric( palette = "RdYlBu", domain=DPTO_JOIN$promedioH)  #palette = "YlGnBu"   "RdBu"  "RdYlBu"  "Spectral"  "Paired"  "PuRd"  "RdYlGn"
popup_sb <- paste0("Promedio de Heridos: ", as.character(DPTO_JOIN$promedioH))
leaflet(sp_df) %>%
addProviderTiles("CartoDB.Positron") %>%
#setView(-98.483330, 38.712046, zoom = 4) %>%
addPolygons(data = DPTO_JOIN ,
fillColor = ~pal(DPTO_JOIN$promedioH),
opacity = 1,
color = "black",
dashArray = "3",fillOpacity = 0.9,
highlight = highlightOptions(
weight = 1,
color = "#666",
dashArray = "",
fillOpacity = 1,
bringToFront = TRUE),
label = DPTO_JOIN$Etiquetas,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"))%>%
addLegend(pal = pal, values =DPTO_JOIN$promedioH, opacity = 0.7, title = NULL,
position = "bottomright")
